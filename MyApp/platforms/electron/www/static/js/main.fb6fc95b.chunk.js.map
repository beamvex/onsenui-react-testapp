{"version":3,"sources":["assets/img/iscream-logo.png","constants/action-types.js","actions/index.js","MapPage.js","HomePage.js","App.js","serviceWorker.js","reducers/auth/index.js","reducers/location/index.js","reducers/ui/index.js","reducers/trucks/index.js","reducers/localstore/index.js","reducers/index.js","sagas/auth/index.js","sagas/location/index.js","sagas/trucks/index.js","sagas/index.js","store/index.js","index.js"],"names":["module","exports","__webpack_require__","p","GET_TRUCKS","TRUCKS_RECEIVED","GET_LOCATION","LOCATION_RECEIVED","OPEN_POPOVER","CLOSE_POPOVER","LOGIN","REGISTER","LOAD_STORE","UPDATE_EMAIL","UPDATE_LISTNER","ADD_TRUCK","updateListener","listener","type","mapStateToProps","state","console","log","mapDispatchToProps","dispatch","openPopUp","target","text","closePopUp","AnyReactComponent","_ref","react_default","a","createElement","react_onsenui","size","default","material","icon","TruckBase","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","_this2","onClick","btn","document","name","ref","React","Component","Truck","connect","MapPopoverBase","_this3","_this4","uiReducer","isOpen","onCancel","getTarget","isCancelable","style","textAlign","opacity","MapPopover","SimpleMap","height","width","paddingTop","lib_default","bootstrapURLKeys","key","center","zoom","defaultCenter","defCenter","defaultZoom","defZoom","MapPage_AnyReactComponent","lat","lng","trucks","map","doc","id","defaultProps","MapPage","_this5","MapPage_SimpleMap","locationReducer","truckReducer","HomePageBase","prevProps","authReducer","email","setState","className","src","logoURL","alt","value","float","onChange","event","placeholder","password","modifier","signIn","signUp","HomePage","updateEmail","App","index","onPreChange","onPostChange","onReactive","position","renderTabs","activeIndex","tabbar","content","title","active","tab","label","src_MapPage","Boolean","window","location","hostname","match","initialState","loggedin","listner","undefined","rootReducer","combineReducers","arguments","length","action","assign","store","currentTrucks","push","truck","localstoreReducer","savedState","storestr","JSON","stringify","localStorage","setItem","registerFB","authFB","regenerator_default","wrap","_context","prev","next","select","sent","firebase","setPersistence","Auth","Persistence","LOCAL","then","createUserWithEmailAndPassword","catch","error","errorCode","code","errorMessage","message","stop","_marked","_context2","signInWithEmailAndPassword","_marked2","apiKey","projectId","onAuthStateChanged","user","uid","fetchLocation","response","Promise","resolve","reject","navigator","geolocation","getCurrentPosition","coords","latitude","longitude","theerror","noGeo","reason","put","location_marked","fetchTrucks","collection","onSnapshot","updateTrucks","trucks_marked","result","trucksReceived","forEach","data","objectSpread","addTruck","actionWatcher","rootSaga","takeLatest","sagas_marked","all","sagas_marked2","sagaMiddleware","createSagaMiddleware","createStore","applyMiddleware","run","ReactDOM","render","es","src_App_0","getElementById","serviceWorker","ready","registration","unregister","subscribe","getState","localStore","parse","getItem","e"],"mappings":"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","file":"static/js/main.fb6fc95b.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/iscream-logo.d2b7eafc.png\";","export const GET_TRUCKS = \"GET_TRUCKS\";\r\nexport const TRUCKS_RECEIVED = \"TRUCKS_RECEIVED\";\r\nexport const GET_LOCATION = \"GET_LOCATION\";\r\nexport const LOCATION_RECEIVED = \"LOCATION_RECEIVED\";\r\nexport const OPEN_POPOVER = \"OPEN_POPOVER\";\r\nexport const CLOSE_POPOVER = \"CLOSE_POPOVER\";\r\nexport const LOGIN = \"LOGIN\";\r\nexport const REGISTER = \"REGISTER\";\r\nexport const LOAD_STORE = \"LOAD_STORE\";\r\nexport const UPDATE_EMAIL = \"UPDATE_EMAIL\";\r\nexport const UPDATE_LISTNER = \"UPDATE_LISTNER\";\r\nexport const ADD_TRUCK = \"ADD_TRUCK\";","import { GET_TRUCKS, \r\n    TRUCKS_RECEIVED, \r\n    GET_LOCATION, \r\n    LOCATION_RECEIVED, \r\n    OPEN_POPOVER, \r\n    CLOSE_POPOVER, \r\n    LOGIN, \r\n    REGISTER,\r\n    UPDATE_EMAIL,\r\n    LOAD_STORE,\r\n    UPDATE_LISTNER,\r\n    ADD_TRUCK } from \"../constants/action-types\";\r\n\r\nexport function getTrucks() {\r\n    return { type: GET_TRUCKS}\r\n}\r\n\r\nexport function getLocation() {\r\n    return { type: GET_LOCATION}\r\n}\r\n\r\nexport function trucksReceived(trucks) {\r\n    return { type: TRUCKS_RECEIVED, trucks };\r\n}\r\n\r\nexport function locationReceived(location) {\r\n    return { type: LOCATION_RECEIVED, location };\r\n}\r\n\r\nexport function openPopUp(target, text) {\r\n    return { type: OPEN_POPOVER, target, text };\r\n}\r\n\r\nexport function closePopUp() {\r\n    return { type: CLOSE_POPOVER}\r\n}\r\n\r\nexport function signUp(email, password) {\r\n    return { type: REGISTER, email, password }\r\n}\r\n\r\nexport function signIn(email, password) {\r\n    return { type: LOGIN, email, password }\r\n}\r\n\r\nexport function updateEmail(email) {\r\n    return { type: UPDATE_EMAIL, email }\r\n}\r\n\r\nexport function loadStore(store) {\r\n    return { type: LOAD_STORE, store }\r\n}\r\n\r\nexport function updateListener(listener) {\r\n    return { type: UPDATE_LISTNER, listener }\r\n}\r\n\r\nexport function addTruck(truck) {\r\n    return { type: ADD_TRUCK, truck }\r\n}","import React from 'react';\r\nimport './App.css';\r\nimport { Icon, AlertDialog, Button, Popover } from 'react-onsenui';\r\nimport GoogleMapReact from 'google-map-react';\r\nimport { connect } from \"react-redux\";\r\nimport { openPopUp, closePopUp } from \"./actions/index\"\r\n\r\nconst mapStateToProps = state => {\r\n    console.log(state);\r\n    return state;\r\n};\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        openPopUp: (target, text) => dispatch(openPopUp(target, text)),\r\n        closePopUp: () => dispatch(closePopUp())\r\n    };\r\n}\r\n\r\nconst AnyReactComponent = ({ text }) => <Icon\r\n    size={{ default: 32, material: 40 }}\r\n    icon={{ default: 'md-gps-dot' }}\r\n/>;\r\n\r\nclass TruckBase extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        // Don't call this.setState() here!\r\n        this.state = {\r\n        };\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Icon\r\n                size={{ default: 32, material: 40 }}\r\n                icon={{ default: 'md-truck' }}\r\n                onClick={() => {\r\n                    console.log(\"clicked!\");\r\n                    this.props.openPopUp(this.btn, this.props.document.name);\r\n                }}\r\n                ref={(btn) => { this.btn = btn; }}\r\n            >\r\n            </Icon>);\r\n    }\r\n\r\n}\r\n\r\nconst Truck = connect(mapStateToProps, mapDispatchToProps)(TruckBase);\r\n\r\nclass MapPopoverBase extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        // Don't call this.setState() here!\r\n        this.state = {\r\n        };\r\n    }\r\n\r\n    render() {\r\n        console.log('map popover render', this.props.uiReducer.isOpen);\r\n        return (\r\n            <Popover\r\n                isOpen={this.props.uiReducer.isOpen}\r\n                onCancel={() => { console.log('cancelled'); this.props.closePopUp(); }}\r\n                getTarget={() => this.props.uiReducer.target} isCancelable={true}\r\n            >\r\n                <div style={{ textAlign: 'center', opacity: 0.5 }}>\r\n                    <p>{this.props.uiReducer.text}</p>\r\n                    <p><small>Click the background to remove the popover.</small></p>\r\n                </div>\r\n            </Popover>\r\n        )\r\n    }\r\n}\r\n\r\nconst MapPopover = connect(mapStateToProps, mapDispatchToProps)(MapPopoverBase);\r\n\r\nclass SimpleMap extends React.Component {\r\n    static defaultProps = {\r\n        defCenter: {\r\n            lat: 0,\r\n            lng: 51\r\n        },\r\n        defZoom: 1\r\n    };\r\n\r\n    render() {\r\n\r\n        return (\r\n            // Important! Always set the container height explicitly\r\n            <div style={{ height: 'calc(100vh - 100px)', width: '100%', paddingTop: '45px' }}>\r\n                <GoogleMapReact\r\n                    bootstrapURLKeys={{ key: 'AIzaSyCI47PgInts5BBEQ8UypZYHqpf-zLeHiDY' }}\r\n                    center={this.props.center}\r\n                    zoom={this.props.zoom}\r\n                    defaultCenter={this.props.defCenter}\r\n                    defaultZoom={this.props.defZoom}\r\n                >\r\n                    <AnyReactComponent\r\n                        lat={this.props.center.lat}\r\n                        lng={this.props.center.lng}\r\n                        text=\"My Marker\"\r\n                    />\r\n\r\n                    {this.props.trucks.map(doc => {\r\n\r\n\r\n\r\n                        return (<Truck key={doc.id} lat={doc.lat} lng={doc.lng} document={doc} />);\r\n                    }\r\n                    )}\r\n\r\n                </GoogleMapReact>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nclass MapPage extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        // Don't call this.setState() here!\r\n        this.state = {\r\n            center: {\r\n                lat: 51.4934,\r\n                lng: 0.0098\r\n            },\r\n            zoom: 1,\r\n            isOpen: false\r\n        };\r\n    }\r\n\r\n    render() {\r\n        console.log('mappage', this.props);\r\n\r\n        return (\r\n            <div>\r\n                <SimpleMap center={this.props.locationReducer.center} zoom={this.props.locationReducer.zoom} trucks={this.props.truckReducer.trucks}>\r\n\r\n                </SimpleMap>\r\n                <MapPopover />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(MapPage);\r\n","import React from 'react';\r\nimport './App.css';\r\nimport logoURL from './assets/img/iscream-logo.png';\r\nimport { Card, Input, Button, Col, Row} from 'react-onsenui';\r\nimport { connect } from \"react-redux\";\r\nimport { signIn, signUp, updateEmail } from \"./actions/index\"\r\nimport memoize from \"memoize-one\";\r\n\r\nconst mapStateToProps = state => {\r\n    console.log('homepage', state);\r\n    return state;\r\n};\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        signIn: (email, password) => dispatch(signIn(email, password)),\r\n        signUp: (email, password) => dispatch(signUp(email, password)),\r\n        updateEmail: (email) => dispatch(updateEmail(email))\r\n    };\r\n}\r\n\r\nclass HomePageBase extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        // Don't call this.setState() here!\r\n        this.state = {\r\n\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        //console.log('homepage CDU', prevProps, this.props);\r\n        if (prevProps.authReducer.email !== this.props.authReducer.email) {\r\n            this.setState({email: this.props.authReducer.email})\r\n        }        \r\n    }\r\n\r\n    render() {\r\n\r\n        //console.log('homepage render', this.props);\r\n\r\n        return (\r\n            <div className=\"homepage-div\">\r\n                <div>\r\n                    <img src={logoURL} alt=\"iscream.app\" className=\"home-logo-center\"/>\r\n                    \r\n                    <Card>\r\n                        <Row><Col>\r\n                        <p>Sign in or Sign up</p>\r\n                        </Col></Row>\r\n                        <Row><Col>\r\n                        <Input className=\"width-max\"\r\n                            value={this.state.email} float\r\n                            onChange={(event) => { this.setState({email: event.target.value})} }\r\n                            placeholder='E-mail Address' />\r\n                        </Col></Row>\r\n                        <Row><Col>\r\n                        <Input className=\"width-max\"\r\n                            value={this.state.password} float\r\n                            onChange={(event) => { this.setState({password: event.target.value})} }\r\n                            placeholder='Password' type=\"password\" />\r\n                        </Col></Row>\r\n                        <Row>                            \r\n                        <Col className=\"p50pButton\">\r\n                        <Button modifier=\"large--cta\" onClick={() => {this.props.signIn(this.state.email, this.state.password)}}>\r\n                        Sign In!\r\n                        </Button>\r\n                        </Col>\r\n                        <Col className=\"p50pButton\">\r\n                        <Button modifier=\"large--cta\" onClick={() => {this.props.signUp(this.state.email, this.state.password)}}>\r\n                        Sign Up!\r\n                        </Button>\r\n                        </Col>\r\n                        </Row>\r\n                    </Card>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport const HomePage = connect(mapStateToProps, mapDispatchToProps)(HomePageBase);\r\n","import React from 'react';\r\nimport { Tabbar, Tab, Page, Toolbar, BackButton, ToolbarButton, Icon } from 'react-onsenui';\r\nimport './App.css';\r\nimport MapPage from './MapPage';\r\nimport { HomePage } from './HomePage';\r\nimport logoURL from './assets/img/iscream-logo.png';\r\n\r\nclass App extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {index:0};\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Page>\r\n        <Toolbar className=\"gradient-back\">\r\n          <div className=\"left\">\r\n           \r\n          </div>\r\n          <div className=\"center\">\r\n            <img src={logoURL} height=\"40px\" alt=\"iscream.app\"/>\r\n          </div>\r\n          <div className=\"right\">\r\n            \r\n          </div>\r\n        </Toolbar>\r\n        <Tabbar\r\n          onPreChange={({ index }) => this.setState({index})}\r\n          onPostChange={() => console.log('postChange')}\r\n          onReactive={() => console.log('postChange')}\r\n          position='bottom'\r\n          index={this.state.index}\r\n          renderTabs={(activeIndex, tabbar) => [\r\n            {\r\n              content: <Page title=\"Home\" active={activeIndex === 0} tabbar={tabbar}>\r\n                <HomePage/>\r\n                  </Page>,\r\n              tab: <Tab label=\"Home\" icon=\"md-home\" />\r\n            },\r\n            {\r\n              content: <Page title=\"Maps\" active={activeIndex === 1} tabbar={tabbar}>\r\n                    <MapPage/>\r\n                </Page>,\r\n              tab: <Tab label=\"Maps\" icon=\"md-map\" />\r\n            },\r\n            {\r\n              content: <Page title=\"Me\" active={activeIndex === 2} tabbar={tabbar} />,\r\n              tab: <Tab label=\"Me\" icon=\"md-account\" />\r\n            },\r\n            {\r\n              content: <Page title=\"Settings\" active={activeIndex === 3} tabbar={tabbar} />,\r\n              tab: <Tab label=\"Settings\" icon=\"md-settings\" />\r\n            }]\r\n          }\r\n        />\r\n      </Page>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import { LOGIN, REGISTER, LOAD_STORE, UPDATE_EMAIL } from \"../../constants/action-types\";\r\nconst initialState = {\r\n    email: '',\r\n    password: '',\r\n    loggedin: false,\r\n};\r\n\r\nexport function authReducer(state = initialState, action) {\r\n\r\n    if (action.type === LOGIN) {\r\n        return Object.assign({}, state, {\r\n            email: action.email,\r\n            password: action.password\r\n        });\r\n    }\r\n    else if (action.type === REGISTER) {\r\n        return Object.assign({}, state, {\r\n            email: action.email,\r\n            password: action.password\r\n        });\r\n    }\r\n    else if (action.type === UPDATE_EMAIL) {\r\n        return Object.assign({}, state, {\r\n            email: action.email,\r\n        });\r\n    }\r\n    else if (action.type === LOAD_STORE) {\r\n        console.log('load store', action);\r\n        return Object.assign({}, state, {\r\n            email: action.store ? action.store.email : '',\r\n        });\r\n    }\r\n\r\n    return state;\r\n\r\n}\r\n","import { LOCATION_RECEIVED } from \"../../constants/action-types\";\r\nconst initialState = {\r\n  center: {\r\n    lat: 51.4934,\r\n    lng: 0.0098\r\n  },\r\n  zoom: 1\r\n};\r\n\r\nexport function locationReducer(state = initialState, action) {\r\n  if (action.type === LOCATION_RECEIVED) {\r\n    console.log(action);\r\n    return Object.assign({}, state, {\r\n      center: action.location.center,\r\n      zoom: action.location.zoom\r\n    });\r\n  }\r\n  return state;\r\n}\r\n","import { OPEN_POPOVER, CLOSE_POPOVER } from \"../../constants/action-types\";\r\nconst initialState = {\r\n  text: '',\r\n  target: null,\r\n  isOpen: false\r\n};\r\n\r\nexport function uiReducer(state = initialState, action) {\r\n  if (action.type === OPEN_POPOVER) {\r\n    console.log(action);\r\n    return Object.assign({}, state, {\r\n      text: action.text,\r\n      target: action.target,\r\n      isOpen: true\r\n    });\r\n  }\r\n  else if (action.type === CLOSE_POPOVER) {\r\n    console.log(action);\r\n    return Object.assign({}, state, {\r\n      text: '',\r\n      target: null,\r\n      isOpen: false\r\n    });\r\n  }\r\n  return state;\r\n}\r\n\r\n","import { TRUCKS_RECEIVED, UPDATE_LISTNER, ADD_TRUCK } from \"../../constants/action-types\";\r\nconst initialState = {\r\n  trucks: [],\r\n  listner: undefined\r\n};\r\n\r\nexport function truckReducer(state = initialState, action) {\r\n  if (action.type === TRUCKS_RECEIVED) {\r\n    console.log(action);\r\n    return Object.assign({}, state, {\r\n      trucks: action.trucks\r\n    });\r\n  } \r\n  else if (action.type === UPDATE_LISTNER) {\r\n    return Object.assign({}, state, {\r\n      listner: action.listner\r\n    });\r\n  }\r\n  else if (action.type === ADD_TRUCK) {\r\n    console.log(action);\r\n    var currentTrucks = state.trucks;\r\n    currentTrucks.push(action.truck);\r\n    return Object.assign({}, state, {\r\n      trucks: currentTrucks\r\n    });\r\n  } \r\n  \r\n  return state;\r\n}\r\n","import { LOGIN, REGISTER } from \"../../constants/action-types\";\r\nvar initialState = {};\r\n\r\nexport function localstoreReducer(state = initialState, action) {\r\n\r\n    var savedState = false;\r\n\r\n    if (action.type === LOGIN) {\r\n        state = Object.assign({}, state, {\r\n            email: action.email,\r\n            password: ''\r\n        });\r\n        savedState = true;\r\n    }\r\n    else if (action.type === REGISTER) {\r\n        state = Object.assign({}, state, {\r\n            email: action.email,\r\n            password: ''\r\n        });\r\n        savedState = true;\r\n    }\r\n\r\n    if (savedState) {\r\n        \r\n        var storestr = JSON.stringify(state);\r\n\r\n        console.log('local', storestr);\r\n\r\n        localStorage.setItem('store', storestr);\r\n        \r\n    }\r\n\r\n    return state;\r\n\r\n}\r\n","import { combineReducers } from \"redux\";\r\nimport { authReducer } from \"./auth/index\";\r\nimport { locationReducer } from \"./location/index\";\r\nimport { uiReducer } from \"./ui/index\";\r\nimport { truckReducer } from \"./trucks/index\";\r\nimport { localstoreReducer } from \"./localstore/index\";\r\n\r\nvar rootReducer = combineReducers({authReducer, locationReducer, uiReducer, truckReducer, localstoreReducer});\r\n\r\nexport default rootReducer;","// This import loads the firebase namespace along with all its type information.\r\nimport * as firebase from 'firebase/app';\r\n \r\n// These imports load individual services into the firebase namespace.\r\nimport 'firebase/auth';\r\nimport { put, takeLatest, all, select } from 'redux-saga/effects'; \r\n\r\nexport function* registerFB () {\r\n    const state = yield select();\r\n    firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL)\r\n      .then(function() {\r\n        firebase.auth().createUserWithEmailAndPassword(state.authReducer.email, state.authReducer.password)\r\n      })\r\n    .catch(function(error) {\r\n        // Handle Errors here.\r\n        var errorCode = error.code;\r\n        var errorMessage = error.message;\r\n        // ...\r\n        console.log(errorCode, errorMessage);\r\n    });\r\n}\r\n\r\nexport function* authFB () {\r\n    const state = yield select();\r\n    firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL)\r\n    .then(function() {\r\n        firebase.auth().signInWithEmailAndPassword(state.authReducer.email, state.authReducer.password)\r\n    })\r\n    .catch(function(error) {\r\n        // Handle Errors here.\r\n        var errorCode = error.code;\r\n        var errorMessage = error.message;\r\n        // ...\r\n        console.log(errorCode, errorMessage);\r\n    });\r\n}\r\n\r\nvar app = firebase.initializeApp({ \r\n    apiKey: 'AIzaSyBpBwGqd8U8GA-HschlOvAUWJVjUFr1bJc',\r\n    projectId: 'test1-2b206',\r\n});\r\nfirebase.auth().onAuthStateChanged((user) => {\r\n    console.log('user event', user);\r\n    if (user !== undefined) {\r\n        console.log('logged in', user.uid);\r\n    }\r\n    else {\r\n        console.log('not logged in');\r\n    }\r\n})","import { put } from 'redux-saga/effects'; \r\nimport { locationReceived, getTrucks } from \"../../actions/index\";\r\n\r\nexport function* fetchLocation() {\r\n\r\n    var response = yield new Promise((resolve, reject) => {\r\n        if (navigator.geolocation) {\r\n            navigator.geolocation.getCurrentPosition(position => {\r\n                console.log(\"Latitude: \" + position.coords.latitude +\r\n            \"<br>Longitude: \" + position.coords.longitude);\r\n\r\n                resolve({\r\n                    center: {\r\n                        lat: position.coords.latitude,\r\n                        lng: position.coords.longitude\r\n                    },\r\n                    zoom: 17\r\n                });\r\n            }, \r\n            theerror => {\r\n                resolve({noGeo: true, reason: theerror});\r\n            });\r\n        } else {\r\n            resolve({noGeo: true});\r\n        }\r\n    });\r\n    \r\n    yield put(locationReceived(response));\r\n\r\n    yield put(getTrucks());\r\n}\r\n\r\n\r\n","import { put, select } from 'redux-saga/effects';\r\nimport { trucksReceived, updateListener, addTruck } from \"../../actions/index\";\r\nimport store from '../../store/index'\r\n\r\n// This import loads the firebase namespace along with all its type information.\r\nimport * as firebase from 'firebase/app';\r\n\r\n// These imports load individual services into the firebase namespace.\r\nimport 'firebase/auth';\r\n\r\nexport function* fetchTrucks() {\r\n\r\n    const state = yield select();\r\n\r\n    if (state.truckReducer.listner !== undefined) {\r\n        state.truckReducer.listner();\r\n    }\r\n\r\n    var listener = undefined;\r\n\r\n    yield listener = firebase.firestore().collection('trucks').onSnapshot(updateTrucks);\r\n\r\n    yield put(updateListener(listener));\r\n\r\n}\r\n\r\nfunction updateTrucks(result) {\r\n    \r\n    var trucks = [];\r\n\r\n    store.dispatch(trucksReceived(trucks));\r\n\r\n    result.forEach(function (doc) {\r\n        // doc.data() is never undefined for query doc snapshots\r\n        console.log(doc.id, \" => \", doc.data());\r\n        var truck = {\r\n            id: doc.id,\r\n            ...doc.data()\r\n        }\r\n        store.dispatch(addTruck(truck));\r\n    })\r\n}\r\n","import { takeLatest, all } from 'redux-saga/effects'; \r\nimport { GET_TRUCKS, GET_LOCATION, LOGIN, REGISTER } from \"../constants/action-types\";\r\nimport { authFB, registerFB } from './auth/index';\r\nimport { fetchLocation } from './location/index';\r\nimport { fetchTrucks } from './trucks/index';\r\n\r\n\r\nfunction* actionWatcher() {\r\n    yield takeLatest(GET_TRUCKS, fetchTrucks);\r\n    yield takeLatest(GET_LOCATION, fetchLocation);\r\n    yield takeLatest(REGISTER, registerFB);\r\n    yield takeLatest(LOGIN, authFB);\r\n} \r\n\r\nexport default function* rootSaga() {\r\n    yield all([\r\n        actionWatcher(),\r\n    ]);\r\n}","import { createStore, applyMiddleware } from \"redux\";\r\nimport rootReducer from \"../reducers/index\";\r\nimport createSagaMiddleware from 'redux-saga';\r\nimport rootSaga from '../sagas';\r\n\r\nconst sagaMiddleware = createSagaMiddleware();\r\n\r\nconst store = createStore(rootReducer, applyMiddleware(sagaMiddleware));\r\n\r\nsagaMiddleware.run(rootSaga);\r\n\r\nexport default store;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport { Provider } from \"react-redux\";\r\nimport store from \"./store/index\";\r\nimport { loadStore, getLocation } from \"./actions/index\";\r\n\r\n// Webpack CSS import\r\nimport 'onsenui/css/onsenui.css';\r\nimport 'onsenui/css/onsen-css-components.css';\r\n\r\nimport * as firebase from 'firebase';\r\n\r\nReactDOM.render(  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\ndocument.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n\r\nstore.subscribe(() => {\r\n    console.log(store.getState());\r\n});\r\n\r\nvar localStore = {};\r\ntry {\r\n    localStore = JSON.parse(localStorage.getItem('store'));\r\n} catch (e) {\r\n    // ignore bad data\r\n}\r\n\r\nstore.dispatch(loadStore(localStore));\r\n\r\nstore.dispatch(getLocation());"],"sourceRoot":""}